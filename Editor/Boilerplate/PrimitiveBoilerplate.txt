using UnityEngine;
using System.Collections.Generic;

namespace Modelular.Runtime
{
    // Specify the menu item name that will be added under the "Add new modifier" button;
    [ModelularInterface("Primitives/#SCRIPTNAME#")]
    public class #SCRIPTNAME# : Modifier, IPrimitive
    {
        #region Properties
        // Use this attribute to setup default values in the inspector : Simply add the right operand of the = operator as a string.
        [ModelularDefaultValue("DefaultPrimitiveProperties.Default()")]
        public DefaultPrimitiveProperties DefaultParameters { get; set; } = DefaultPrimitiveProperties.Default();



        #endregion

        
        #region Methods
        public override StackElement Bake(StackElement previousResult)
        {
            int vCount = ExpectedVertexCount();
            if (!IgnoreVertexLimits)
                GlobalSettings.DetectVertexCountLimitations(vCount);

            List<Polygon> obj = Make();
            obj = (this as IPrimitive).ApplyDefaultParameters(obj);


            previousResult.AddPolygons(obj);
            return previousResult;
        }

        private List<Polygon> Make()
        {
            // Add your polygons to this list
            List<Polygon> result = new();
            // Add your vertices to this array
            Vertex[] vertices = new Vertex[ExpectedVertexCount()];

            // Create your primitive (vertices + polygons) here

            return result;
        }

        private int ExpectedVertexCount()
        {
            // Specify here how much vertices will get generated by this primitive
            return 0;
        }

        #endregion
    }
}